{
  "visit": {
    "properties": {
      "url": { "type": "string", "index": "not_analyzed" },
      "referer": { "type": "string", "index": "not_analyzed" },
      "visited_at": { "type": "date", "format": "yyyy-MM-dd'T'HH:mm:ssZ" },
      "visit_type": { "type": "string", "index": "not_analyzed" },
      "client": {
        "properties": {
          "ip": { "type": "string", "index": "not_analyzed" },
          "user_agent": { "type": "string", "index": "not_analyzed" },
          "browser": { "type": "string", "index": "not_analyzed" },
          "os": { "type": "string", "index": "not_analyzed" },
          "device_type": { "type": "string", "index": "not_analyzed" }
        }
      },
      "response_time": { "type": "integer" },
      "search": {
        "properties": {
          "query": {
            "type": "string",
            "fields": {
               "raw": { "type": "string", "index": "not_analyzed" }
            }
          },
          "returned": {
            "properties" : {
              "total_hits": { "type": "integer" },
              "top_places": { "type": "integer" },
              "top_people": { "type": "integer" },
              "top_periods": { "type": "integer" }
            }
          }
        }
      },
      "selection": {
        "properties": {
          "identifier": { "type": "string", "index": "not_analyzed" },
          "title": {
            "type": "string",
            "fields": {
               "raw": { "type": "string", "analyzer":"lowercase_keyword" }
            }
          },
          "is_in_dataset": {
            "properties": {
              "paths": { "type": "string", "index": "not_analyzed" },
              "ids": { "type": "string", "index": "not_analyzed" }
            }
          }
        }
      }
    }
  }
}
